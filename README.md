小程序学习笔记
1.小程序介绍
1.1特点：  快速加载  能力强大  原生体验  已用且安全的微信数据开放  高效简介的开发。
1.2与网页开发区别
网页开发： 渲染线程与脚本线程是互斥的 在手机端加载过程中容易产生空白页面
小程序： 渲染与脚本分属两个线程没有互斥
网页开发：开发者可以使用浏览器暴露出来的DomApi进行开发进行dom操作
小程序： 没有完整的浏览器对象缺少相应的domapi  所以一些jquery是不可以使用的
2.小程序代码构成
2.1基本构成部分
配置json、模板代码wxml文件、样式wxss文件
2.2JSON文件
数据格式非编程语言
2.2.1 语法
JSON文件包裹于大括号之中用key-value方式表达数据
JSON文件配置中的key值需要用双引号引起  不能是单引号或者没有引号
JSON值 只能是 数字、字符串、数组、对象、null、bool 不能是undefined
JSON文件中不能使用注释 会报错
2.3WXML文件
Wxml文件要求标签时完全闭合的否则会报错
Wxml文件属性时大小写敏感的
2.3.1 数据绑定
Wxml通过{{变量名}}变量名来绑定wxml文件和对应的javascript中的data时间属性
2.3.1.1 变量逻辑
属性名称时可以用变量绑定的 但是绑定的变量名称必须用双引号引起来
变量名的大小写是敏感的
没有定义的变量或者为undefined变量是不会被渲染的	
可以在{{}}中进行简单的逻辑运算
可以在{{}}中放置字符串 数组等等
2.3.1.2 条件逻辑
Wx:if=”{{}}”判断是否需要渲染代码块
Wx：elif=”{{}}” wx:else  做else 相关判断
2.3.1.2 列表渲染
Wx:for=”{{array}}”  index 为默认下表  item为当前数组选项
Wx:for-index 指定当前下表变量名
Wx:for-item  指定当前元素的变量名	

如果列表中的项目会动态改变或者有新的项目添加到列表中去并且希望列表中的项目保持自己的特性和状态需要用wx：key来列表中的项目唯一标识符
Wx：key两种形式
1.字符串：for循环中对象的一个数字 或者字符串的属性必须唯一 且不能改变
2.保留关键字在array中的item本身需要保证item是一个唯一的数字或者字符串
2.3.2 模板
<template></template>之间定义模板的内容  通过name属性进行命名，然后通过<template is=”templatename”></tempalte>进行动态的引用。
2.3.3 引用
2.3.3.1 import引用方式
<import src=”wxml 文件地址”/>：引用后可以使用引用文件中的模板
Import引用的方式不具备递归特性 只能使用引用文件中的模板 不能使用引用文件中的引用模板
Include可以将目标文件 除了<template/> <wxs/>外的整个代码引入，相当于直接拷贝到include的位置。
2.3.4 共有属性


2.4wxss文件
    2.4.1 简介
根目录中的.wxss为项目公共样式，他会被注入到小程序的每个页面
与app.json中注册的页面同级且同名的wxss文件为该页面的样式
其他样式 可以被公共样式 或者页面样式 引用的样式文件
2.4.2 尺寸单位
小程序使用rpx作为尺寸单位用以配置不同宽度的屏幕，rpx换算px的方式是以375个物理像素为急转 1rpx = 1px
2.4.3 wxss的引用
    在wxss文件中引用其他的样式文件 引用方式 @import  ‘引用路径’
2.4.4 内联样式
Wxml中支持内联样式  样式与web开发一致
Wxml支持动态更新内联样式。
2.4.5 小程序样式选择器

        2.4.6 官方样式库 
WeUI.wxss  ：https://github.com/Tencent/weui-wxss
2.5javascript脚本
区别：包含三个部分  ecmascript 小程序框架  小程序api
微信小程序中没有像web开发一样的dom，bom 所以jquery等是不可以用的。同样的由于缺少native模块和npm包管理机制小程序中无法加载原生库也无法直接使用大部分的npm包。	
2.5.1 小程序运行的平台
1.ios平台     -----ios平台并没有完全兼容ECMA6的标准
2.android平台
3.小程序ide
针对小程序不同平台对于ECMA6语法的支持程度不同，小程序ide提供了一个语法转换码工具帮助开发者把ECMA6转换成ECMA5。需要在项目设置中勾选es6转es5 .
   2.5.2 小程序脚本文件可以采用模块化，一个脚本可以通过使用module.exports 或者exports对外进行暴露。通过rquire(“路径”)进行引用。

   2.5.3 小程序脚本的执行顺序
小程序的入口文件是app.js 并按照require的顺序执行脚本。当app.js执行完毕后，小程序会按照在app.json中定义的pages顺序逐一执行。
   2.5.4 小程序脚本的作用域
与nodejs比较相似，在文件中声明的变量 旨在本文件中生效，因此可以在不同的文件中声明相同的变量名称
当要使用全局变量的时候 可以通过使用getApp()获取全局的实例。要保证定义的全局变量声明在前  读取在后。
3.小程序的宿主环境
3.1渲染层和逻辑层
1.渲染层和数据相关。
	2.逻辑层负责产生、处理数据。
	3.逻辑层通过 Page 实例的 setData 方法传递数据到渲染层。
3.1.1 通信模型
   
3.1.2数据驱动
基本原理 wxml相当于一颗dom树 而通过一个js对象也可以表达一个dom树结构，wxml可以先转换成一个dom树，然后渲染成一个真正的dom树。
3.1.3 双线程下的界面渲染
     
3.2 程序与页面
3.2.1 程序
宿主环境通过提供了app()构造器来注册一个程序app。App构造器必须在app.js中声明 。App() 是一个单例，其他文件可以使用getApp()方法来获取app()程序实例。
App构造器参数如下：
onLaunch  function  当程序完成初始化时会调用
onShow    function  当程序启动或者由后台进入前台会触发
onHide    function  当程序由前台进入后台会触发
onError    function  当程序发生脚本错误 或者调用api失败时会触发	其他字段  任意     可以添加任意的函数或者数据到object参数中去

生命周期：
初次进入小程序时微信客户吨准备好宿主环境同时从网络上或者本地拿到小程序的代码包，把他注入宿主环境中，初始化完毕后微信客户端就会给app派发一个onLaunch事件
进入小程序后用户可以点击关闭按钮，或者按home键离开小程序，此时小程序并没有被销毁，这就是小程序进入后台状态，此时onHide会被调用
当再次回到微信或者小程序的时候，微信客户端会把后台小程序唤醒，称为小程序进入前台事件，并调用onShow
为了避免混乱我们应该避免从其他程序中调用app中的生命周期。


3.2.1.2 小程序全局数据
切换不同页面时小程序的逻辑层的脚本仍然在一个jsCore线程中。因此app（）实例可以在不同的页面共享。同时需要注意 使用setTimeout 或者setinterval的时候跳转页面时候这些函数并没有被清除。需要自己手动清除下。
3.3.2 页面
3.3.2.1 文件构成和路径
界面、配置、逻辑
一个页面文件需要放置在一个目录下。Wxml跟js时必须存在的 而json、wxss非必需
页面路径需要在根目录下app.js中的pages中声明 否则不会注册到宿主环境中去
3.3.2.1 页面构造器page()
构造器参数如下
data                 object   页面初始数据
onload              function  (生)监听页面加载 --早于onshow  onReady
onReady            function  (生)监听页面初次渲染完成 
onShow            function   (生)监听页面显示 --早于onReady
onHide             function  (生) 监听页面隐藏
OnUnload           function  (生) 监听页面卸载
OnPullDownRefresh   function  监听页面下拉动作
OnReachBottom      function  页面上拉触底事件
OnShareAppMessage  function  用户点击右上角转发
OnPageScroll         function   页面滚动触发事件
其他			    任意    任意

